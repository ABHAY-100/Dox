generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id                 String   @id @default(auto()) @map("_id") @db.ObjectId
  googleId           String?
  githubId           String?     
  displayName        String?
  githubName        String?
  email              String?      @unique
  provider           String       
  photo              String?

  // Your existing session management
  refreshToken       String?  
  refreshExpiry      DateTime?    

  // GitHub OAuth token (non-expiring)
  githubAccessToken  String?      // store GitHub access token
  githubTokenIV String?
  githubTokenAuthTag String?
}


model UserRepo{
  id String @id @default(auto()) @map("_id") @db.ObjectId
  userId String @db.ObjectId
  repoId String
  name      String   // Repo name
  fullName  String   // owner/repo
  private   Boolean  // whether repo is private
  connected Boolean  @default(false) // always false initially
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}